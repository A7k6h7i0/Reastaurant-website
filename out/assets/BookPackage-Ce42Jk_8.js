import{a as b,r as l,j as e}from"./index-Dh6MEsbL.js";import{p as N}from"./packages-DM5ThbDS.js";const y="http://localhost:5000",w=()=>{const{id:r}=b(),a=l.useMemo(()=>N.find(s=>s.id===r),[r]),[t,x]=l.useState(""),[n,u]=l.useState(""),[i,h]=l.useState(""),[o,m]=l.useState(""),[p,g]=l.useState(!1),[c,d]=l.useState(!1);if(l.useEffect(()=>{m(`DDR-${Date.now().toString(36).toUpperCase()}`)},[]),!a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-lg font-semibold",children:"Loading package details…"})});const j=async()=>{if(!t||!n||!i){alert("Please fill all details");return}d(!0);try{const s=await fetch(`${y}/api/book-tour`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,email:n,phone:i,token:o,packageId:a.id})});if(!s.ok){const f=await s.text();throw new Error(f||"Booking API failed")}g(!0)}catch(s){console.error("❌ Booking failed:",s),alert("Booking failed. Please try again.")}finally{d(!1)}};return e.jsxs("section",{className:"max-w-5xl mx-auto px-6 py-12 space-y-10",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow p-8 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:a.title}),e.jsx("p",{className:"text-gray-600",children:a.nights}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Tour Itinerary"}),e.jsx("div",{className:"space-y-3",children:a.itinerary.map(s=>e.jsxs("p",{children:[e.jsxs("strong",{children:[s.day,":"]})," ",s.description]},s.day))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Package Includes"}),e.jsx("ul",{className:"list-disc pl-6 space-y-1",children:a.includes.map(s=>e.jsx("li",{children:s},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Package Excludes"}),e.jsx("ul",{className:"list-disc pl-6 space-y-1",children:a.excludes.map(s=>e.jsx("li",{children:s},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Important Notes"}),e.jsx("ul",{className:"list-disc pl-6 space-y-1",children:a.notes.map(s=>e.jsx("li",{children:s},s))})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow p-8 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Send Booking Request"}),p?e.jsxs("p",{className:"text-green-600 font-semibold",children:["✅ Booking successful. Your token: ",e.jsx("strong",{children:o})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{placeholder:"Full Name",value:t,onChange:s=>x(s.target.value),className:"w-full border p-3 rounded"}),e.jsx("input",{placeholder:"Mobile Number",value:i,onChange:s=>h(s.target.value),className:"w-full border p-3 rounded"}),e.jsx("input",{placeholder:"Email Address",value:n,onChange:s=>u(s.target.value),className:"w-full border p-3 rounded"}),e.jsx("input",{value:o,readOnly:!0,className:"w-full border p-3 rounded bg-gray-100"}),e.jsx("button",{onClick:j,disabled:c,className:"bg-forest text-white px-6 py-3 rounded-xl disabled:opacity-60",children:c?"Sending...":"Send Booking Request"})]})]})]})};export{w as default};
//# sourceMappingURL=BookPackage-Ce42Jk_8.js.map
