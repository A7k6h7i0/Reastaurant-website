{"version":3,"file":"BookOtherIslandPackage-BWMJ0QFs.js","sources":["../../src/pages/book/BookOtherIslandPackage.tsx"],"sourcesContent":["import { useParams } from \"react-router-dom\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { otherIslandPackages } from \"../../data/otherIslandPackages\";\r\n\r\nconst BookOtherIslandPackage = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n\r\n  const selectedPackage = useMemo(\r\n    () => otherIslandPackages.find((p) => p.id === id),\r\n    [id]\r\n  );\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [token, setToken] = useState(\"\");\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setToken(`DD-${Date.now().toString(36).toUpperCase()}`);\r\n  }, []);\r\n\r\n  if (!selectedPackage) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <p className=\"text-lg font-semibold\">Loading package details…</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const handleBooking = async () => {\r\n    if (!name || !email || !phone) {\r\n      alert(\"Please fill all details\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await fetch(\r\n        `${import.meta.env.VITE_API_URL}/api/book-tour`,\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            name,\r\n            email,\r\n            phone,\r\n            token,\r\n            packageId: selectedPackage.code,\r\n          }),\r\n        }\r\n      );\r\n\r\n      if (!res.ok) throw new Error(\"Booking API failed\");\r\n\r\n      setSubmitted(true);\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert(\"Booking failed. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"max-w-6xl mx-auto px-6 py-12 space-y-10\">\r\n      {/* PACKAGE DETAILS */}\r\n      <div className=\"bg-white rounded-3xl shadow p-8 space-y-6\">\r\n        <h1 className=\"text-3xl font-bold\">{selectedPackage.title}</h1>\r\n        <p className=\"text-gray-600\">{selectedPackage.days}</p>\r\n        {/* rest unchanged */}\r\n      </div>\r\n\r\n      {/* BOOKING FORM */}\r\n      <div className=\"bg-white rounded-3xl shadow p-8 space-y-4\">\r\n        <h2 className=\"text-2xl font-bold\">Book This Tour</h2>\r\n\r\n        {submitted ? (\r\n          <p className=\"text-green-600 font-semibold\">\r\n            ✅ Booking successful. Your token: <strong>{token}</strong>\r\n          </p>\r\n        ) : (\r\n          <>\r\n            <input\r\n              placeholder=\"Full Name\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              className=\"w-full border p-3 rounded\"\r\n            />\r\n            <input\r\n              placeholder=\"Mobile Number\"\r\n              value={phone}\r\n              onChange={(e) => setPhone(e.target.value)}\r\n              className=\"w-full border p-3 rounded\"\r\n            />\r\n            <input\r\n              placeholder=\"Email Address\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              className=\"w-full border p-3 rounded\"\r\n            />\r\n            <input\r\n              value={token}\r\n              readOnly\r\n              className=\"w-full border p-3 rounded bg-gray-100\"\r\n            />\r\n\r\n            <button\r\n              onClick={handleBooking}\r\n              disabled={loading}\r\n              className=\"bg-forest text-white px-6 py-3 rounded-xl disabled:opacity-60\"\r\n            >\r\n              {loading ? \"Booking...\" : \"Book Tour\"}\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BookOtherIslandPackage;\r\n"],"names":["BookOtherIslandPackage","id","useParams","selectedPackage","useMemo","otherIslandPackages","p","name","setName","useState","email","setEmail","phone","setPhone","token","setToken","submitted","setSubmitted","loading","setLoading","useEffect","jsx","handleBooking","error","jsxs","Fragment","e"],"mappings":"4GAIA,MAAMA,EAAyB,IAAM,CACnC,KAAM,CAAE,GAAAC,CAAA,EAAOC,EAAA,EAETC,EAAkBC,EAAAA,QACtB,IAAMC,EAAoB,KAAMC,GAAMA,EAAE,KAAOL,CAAE,EACjD,CAACA,CAAE,CAAA,EAGC,CAACM,EAAMC,CAAO,EAAIC,EAAAA,SAAS,EAAE,EAC7B,CAACC,EAAOC,CAAQ,EAAIF,EAAAA,SAAS,EAAE,EAC/B,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,EAAE,EAC/B,CAACK,EAAOC,CAAQ,EAAIN,EAAAA,SAAS,EAAE,EAC/B,CAACO,EAAWC,CAAY,EAAIR,EAAAA,SAAS,EAAK,EAC1C,CAACS,EAASC,CAAU,EAAIV,EAAAA,SAAS,EAAK,EAM5C,GAJAW,EAAAA,UAAU,IAAM,CACdL,EAAS,MAAM,KAAK,IAAA,EAAM,SAAS,EAAE,EAAE,YAAA,CAAa,EAAE,CACxD,EAAG,CAAA,CAAE,EAED,CAACZ,EACH,OACEkB,EAAAA,IAAC,OAAI,UAAU,gDACb,eAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,0BAAA,CAAwB,EAC/D,EAIJ,MAAMC,EAAgB,SAAY,CAChC,GAAI,CAACf,GAAQ,CAACG,GAAS,CAACE,EAAO,CAC7B,MAAM,yBAAyB,EAC/B,MACF,CAEAO,EAAW,EAAI,EAEf,GAAI,CAgBF,GAAI,EAfQ,MAAM,MAChB,sCACA,CACE,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CACnB,KAAAZ,EACA,MAAAG,EACA,MAAAE,EACA,MAAAE,EACA,UAAWX,EAAgB,IAAA,CAC5B,CAAA,CACH,GAGO,GAAI,MAAM,IAAI,MAAM,oBAAoB,EAEjDc,EAAa,EAAI,CACnB,OAASM,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnB,MAAM,mCAAmC,CAC3C,QAAA,CACEJ,EAAW,EAAK,CAClB,CACF,EAEA,OACEK,EAAAA,KAAC,UAAA,CAAQ,UAAU,0CAEjB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAH,EAAAA,IAAC,KAAA,CAAG,UAAU,qBAAsB,SAAAlB,EAAgB,MAAM,EAC1DkB,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAiB,WAAgB,KAAK,CAAA,EAErD,EAGAG,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,OAAC,KAAA,CAAG,UAAU,qBAAqB,SAAA,iBAAc,EAEhDR,EACCQ,EAAAA,KAAC,IAAA,CAAE,UAAU,+BAA+B,SAAA,CAAA,qCACRH,EAAAA,IAAC,UAAQ,SAAAP,EAAM,CAAA,EACnD,EAEAU,EAAAA,KAAAC,EAAAA,SAAA,CACE,SAAA,CAAAJ,EAAAA,IAAC,QAAA,CACC,YAAY,YACZ,MAAOd,EACP,SAAWmB,GAAMlB,EAAQkB,EAAE,OAAO,KAAK,EACvC,UAAU,2BAAA,CAAA,EAEZL,EAAAA,IAAC,QAAA,CACC,YAAY,gBACZ,MAAOT,EACP,SAAWc,GAAMb,EAASa,EAAE,OAAO,KAAK,EACxC,UAAU,2BAAA,CAAA,EAEZL,EAAAA,IAAC,QAAA,CACC,YAAY,gBACZ,MAAOX,EACP,SAAWgB,GAAMf,EAASe,EAAE,OAAO,KAAK,EACxC,UAAU,2BAAA,CAAA,EAEZL,EAAAA,IAAC,QAAA,CACC,MAAOP,EACP,SAAQ,GACR,UAAU,uCAAA,CAAA,EAGZO,EAAAA,IAAC,SAAA,CACC,QAASC,EACT,SAAUJ,EACV,UAAU,gEAET,WAAU,aAAe,WAAA,CAAA,CAC5B,EACF,CAAA,EAEJ,CAAA,EACF,CAEJ"}